

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>About Docker &mdash; elabftw 1.3.0 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="elabftw 1.3.0 documentation" href="index.html"/>
        <link rel="next" title="Frequently asked questions" href="faq.html"/>
        <link rel="prev" title="How to update" href="how-to-update.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> elabftw
          

          
          </a>

          
            
            
              <div class="version">
                1.3.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <p class="caption"><span class="caption-text">Installing</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="install.html">Install on a GNU/Linux server</a></li>
<li class="toctree-l1"><a class="reference internal" href="install-drop.html">Install in the cloud</a></li>
<li class="toctree-l1"><a class="reference internal" href="install-mac.html">Install on Mac OS X</a></li>
<li class="toctree-l1"><a class="reference internal" href="install-windows.html">Install on Windows</a></li>
<li class="toctree-l1"><a class="reference internal" href="install-oldschool.html">Install on GNU/Linux (without Docker)</a></li>
<li class="toctree-l1"><a class="reference internal" href="common-errors.html">Common errors</a></li>
<li class="toctree-l1"><a class="reference internal" href="postinstall.html">Post install</a></li>
<li class="toctree-l1"><a class="reference internal" href="backup.html">How to backup</a></li>
<li class="toctree-l1"><a class="reference internal" href="how-to-update.html">How to update</a></li>
</ul>
<p class="caption"><span class="caption-text">Documentation</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="">About Docker</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="#how-does-it-work">How does it work?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#about-the-docker-image">About the docker image</a></li>
<li class="toctree-l2"><a class="reference internal" href="#editing-the-docker-compose-yml-file">Editing the docker-compose.yml file</a></li>
<li class="toctree-l2"><a class="reference internal" href="#using-the-let-s-encrypt-certificates">Using the Let&#8217;s Encrypt certificates</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">Frequently asked questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="features.html">Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="manual.html">Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="upgrade-to-docker.html">Upgrade a normal install to a Docker install</a></li>
</ul>
<p class="caption"><span class="caption-text">Misc</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="thanks.html">Thanks</a></li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="license.html">License</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">elabftw</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>About Docker</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/docker-doc.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="about-docker">
<span id="docker-doc"></span><h1>About Docker<a class="headerlink" href="#about-docker" title="Permalink to this headline">¶</a></h1>
<img alt="docker" class="align-center" src="_images/docker.png" />
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>Using Docker allows you to run elabftw without touching the configuration of your server or computer. By using this docker image you don&#8217;t have to worry about missing php extensions or misconfigurations of the server because all was done for you beforehand. It&#8217;s also easier to upgrade and keep your installation up to date.</p>
</div>
<div class="section" id="how-does-it-work">
<h2>How does it work?<a class="headerlink" href="#how-does-it-work" title="Permalink to this headline">¶</a></h2>
<p>Running eLabFTW with Docker means everything needed will be provided. You&#8217;ll have the correct version of every library and the webserver will be properly setup with a secure configuration. Because eLabFTW will run in a container. In fact you&#8217;ll have two containers running. One will be from the official MySQL image, running a MySQL server. The other will be the eLabFTW image, with a webserver + PHP and the eLabFTW files. In order to facilitate the whole process, we will use <a class="reference external" href="https://docs.docker.com/compose/install/">docker-compose</a>. This tool will allow us to do the configuration in a YAML file, easy to modify and copy around, and also permit easy start/stop of the containers.</p>
</div>
<div class="section" id="about-the-docker-image">
<h2>About the docker image<a class="headerlink" href="#about-the-docker-image" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>The elabftw docker image is using <a class="reference external" href="https://alpinelinux.org/">Alpine Linux</a> as a base OS, so we get a lightweight and secure base.</li>
<li><a class="reference external" href="https://secure.php.net/">PHP 7</a> is used so we get an up to date and fast PHP.</li>
<li><a class="reference external" href="http://nginx.org">Nginx</a> is used so we get the best webserver out there running our app with <a class="reference external" href="https://en.wikipedia.org/wiki/HTTP/2">HTTP/2</a> capabilities.</li>
</ul>
<p>Using the provided Docker image adds security features automatically:</p>
<ul class="simple">
<li>header X-Frame-Option</li>
<li>header X-XSS-Protection</li>
<li>header X-Content-Type-Options</li>
<li>header Strict-Transport-Security</li>
<li>header Content-Security-Policy to prevent XSS</li>
<li>use Diffie-Hellman for key exchange with 2048 bits parameter</li>
<li>use modern cipher suite and protocols for SSL. This will result in an A rating on <a class="reference external" href="https://www.ssllabs.com/ssltest/">SSLLabs</a>, as you can see below.</li>
<li>custom secure php configuration</li>
<li>custom secure nginx configuration</li>
</ul>
<p>Test scan of an eLabFTW install at <a class="reference external" href="https://securityheaders.io">SecurityHeaders.io</a>:</p>
<img alt="security headers result" class="align-center" src="_images/securityheaders.io.png" />
<p>(there is no public key pin because this needs to be done by the server admin)</p>
<p>Test scan of an eLabFTW install at <a class="reference external" href="https://www.ssllabs.com/ssltest/">Qualys SSL labs</a>:</p>
<img alt="SSL labs report" class="align-center" src="_images/qualys-ssl-report.png" />
<p>Just for fun, try to use these two websites to scan the sites of other services you might use or consider using. You&#8217;ll see a lot of F marks… I&#8217;ll let you draw your own conclusions from that ;)</p>
<p>You don&#8217;t have to be a specialist in web security to see that some services are completely insecure and should be avoided. Full security can never be completely achieved when it comes to web and computers, but with eLabFTW at least you have the best possible setup to mitigate or stop the most commons attacks.</p>
</div>
<div class="section" id="editing-the-docker-compose-yml-file">
<h2>Editing the docker-compose.yml file<a class="headerlink" href="#editing-the-docker-compose-yml-file" title="Permalink to this headline">¶</a></h2>
<p>If you&#8217;ve never done that before, it can look scary, hence this extended documentation ;)</p>
<p>The first thing you need to change is the value of DB_PASSWORD. It is advised to use a very long and complex password, as you won&#8217;t have to remember it. Use can use <a class="reference external" href="https://www.grc.com/passwords.htm">this page</a> to get a password. Make sure to put the same in MYSQL_PASSWORD. Change also MYSQL_ROOT_PASSWORD.</p>
<p>Then get a secret key from the <a class="reference external" href="https://demo.elabftw.net/install/generateSecretKey.php">provided url</a> and paste it in SECRET_KEY
(this key is used to encrypt the smtp password).</p>
<p>In Docker, the containers are not persistant, this means that changes made will vanish when the container is removed.</p>
<p>But we need to have persistant data of course, so what we will do is tell Docker that some directories will in reality be on the host. We need the uploads folder, and the MySQL database. You can have those folders anywhere, just make sure the permissions are not too restrictive.</p>
<p>In the example configuration file, there is a /dok folder at the root with a subfolder for the uploaded files, and another one for the SQL database. So in order to use this, one would need to run this command (as root):</p>
<div class="highlight-bash"><div class="highlight"><pre>mkdir -pvm <span class="m">700</span> /var/elabftw/<span class="o">{</span>web,mysql<span class="o">}</span>
</pre></div>
</div>
</div>
<div class="section" id="using-the-let-s-encrypt-certificates">
<h2>Using the Let&#8217;s Encrypt certificates<a class="headerlink" href="#using-the-let-s-encrypt-certificates" title="Permalink to this headline">¶</a></h2>
<p>If your server has a domain name pointing to it, you can ask Let&#8217;s Encrypt to give you SSL certificates. It is highly recommended to do that. Also, self-signed certificates will show a warning on the browser, which is an annoyance.</p>
<p>Change ENABLE_LETSENCRYPT to true, and uncomment the letsencrypt volume line. Because certificates are on the host, we need a volume to use them from the container.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you use the install on a drop, letsencrypt certificates will be configured automatically for you</p>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="faq.html" class="btn btn-neutral float-right" title="Frequently asked questions" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="how-to-update.html" class="btn btn-neutral" title="How to update" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2012, Nicolas CARPi.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1.3.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>